<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Low Cap Crypto Analyzer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}?v=4">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="refresh-controls">
                <div class="refresh-status">
                    <div>Last: <span class="last-updated" id="lastUpdated">Loading...</span></div>
                    <div>Next: <span id="nextRefresh">-</span></div>
                </div>
                <button class="btn" onclick="toggleSymbolSearch()" id="symbolToggleBtn">
                    ğŸ” Add Symbol
                </button>
                <button class="btn" onclick="forceRefresh()" id="refreshBtn">
                    ğŸ”„ Refresh
                </button>
            </div>
            <h1>ğŸš€ Crypto Investment Dashboard</h1>
            <p>AI-powered analysis â€¢ Hidden gems â€¢ Low-cap focus â€¢ Auto-updates every 5 min</p>
        </div>

        <!-- Status Toast Container -->
        <div class="status-container" id="statusContainer">
            <div class="status-toast" id="statusToast">
                <span id="statusMessage"></span>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="favorites-container" id="favoritesContainer">
                <div class="coins-header">
                    <h2>Favorites</h2>
                </div>
                <div id="favoritesContent">
                    <div class="loading">ğŸ”„ Loading favorites...</div>
                </div>
            </div>

            <div class="ml-status-container" id="mlStatusContainer">
                <div class="coins-header">
                    <h2>ğŸ§  ML Analysis Status</h2>
                </div>
                <div id="mlStatusContent">
                    <div class="loading">ğŸ”„ Loading ML status...</div>
                </div>
                <div class="ml-controls">
                    <button class="refresh-btn" onclick="trainMLModel()" id="trainBtn">
                        ğŸ¯ Train ML Model
                    </button>
                    <button class="refresh-btn" onclick="refreshMLStatus()" id="refreshMLBtn">
                        ğŸ”„ Refresh ML Status
                    </button>
                </div>
            </div>

            <div class="symbol-search-container" id="symbolSearchContainer" style="display: none;">
                <div class="coins-header">
                    <h2>ğŸ” Add New Symbol</h2>
                    <p>Search and add new cryptocurrency symbols to track</p>
                </div>
                
                <div class="symbol-search-form">
                    <input type="text" 
                           id="symbolSearchInput" 
                           class="symbol-search-input" 
                           placeholder="Enter symbol (e.g., BTC, ETH, DOGE)"
                           maxlength="20">
                    <button class="symbol-search-btn" onclick="searchSymbols()" id="searchBtn">
                        ğŸ” Search
                    </button>
                </div>
                
                <div id="searchResults">
                    <!-- Results will be populated here -->
                </div>
            </div>

            <div class="coins-container">
                <div class="coins-header">
                    <h2>ğŸ’ Live Cryptocurrency Analysis</h2>
                    <p>Top opportunities under Â£1 with integrated hidden gem detection</p>
                </div>
                <div id="coinsContent">
                    <div class="loading">ğŸ”„ Loading cryptocurrency data...</div>
                </div>
                <div class="last-updated" id="lastUpdated"></div>
            </div>
        </div>
    </div>

    <!-- Modular JavaScript -->
    <script src="{{ url_for('static', filename='js/ui-components.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/coin-display.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/api-service.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/favorites.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/symbol-search.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/utils.js') }}?v=6"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}?v=6"></script>
</body>
</html>
